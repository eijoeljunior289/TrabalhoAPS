{% extends "base.html" %}
{% block content %}
<h2>{{ 'Editar Tarefa' if task else 'Nova Tarefa' }}</h2>

<form class="card task-form" method="post">
  <div class="form-group">
    <label for="title">Título</label>
    <input id="title" name="title" required value="{{ task.title if task else '' }}">
  </div>
  <div class="form-group">
    <label for="description">Descrição</label>
    <textarea id="description" name="description" rows="3">{{ task.description if task else '' }}</textarea>
  </div>
  <div class="form-group">
    <label for="due">Vencimento</label>
    <input id="due" name="due" type="datetime-local" placeholder="YYYY-MM-DDTHH:MM" value="{{ task.due if task else '' | replace(' ', 'T') }}">
  </div>
  
  <div class="form-row">
    <div class="form-group">
      <label for="priority">Prioridade</label>
      <select id="priority" name="priority">
        {% for p in priorities %}
        <option value="{{ p }}" {% if task and task.priority==p %}selected{% endif %}>{{ p }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="form-group">
      <label for="category">Categoria</label>
      <select id="category" name="category">
        <option value="">Sem categoria</option>
        {% for c in categories %}
        <option value="{{ c[0] }}" {% if task and task.category==c[1] %}selected{% endif %}>{{ c[1] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <div class="form-group checkbox-group">
    <label>
        <input type="checkbox" name="notify" {% if task and task.notify %}checked{% elif not task %}checked{% endif %}> Ativar notificações
    </label>
  </div>
  
  <div class="form-actions">
    <button class="btn primary" type="submit">Salvar</button>
    <a class="btn" href="{{ url_for('index') }}">Cancelar</a>
  </div>
</form>
{% endblock %}