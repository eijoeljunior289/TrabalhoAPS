{% extends "base.html" %}
{% block content %}
<h2>Categorias</h2>

<form class="card new-category-form" action="{{ url_for('new_category') }}" method="post">
  <h3>Nova Categoria</h3>
  <div class="form-group">
    <label for="new_title">Título</label>
    <input id="new_title" name="title" required>
  </div>
  <div class="form-group">
    <label for="new_description">Descrição</label>
    <input id="new_description" name="description">
  </div>
  <button class="btn primary" type="submit">Criar Categoria</button>
</form>

<ul class="category-list">
  {% for c in categories %}
  <li class="card category-item">
    <form action="{{ url_for('edit_category', cat_id=c.id) }}" method="post" class="category-edit-form">
      <div class="form-group">
        <label for="title-{{ c.id }}">Título</label>
        <input id="title-{{ c.id }}" name="title" value="{{ c.title }}" required>
      </div>
      <div class="form-group">
        <label for="desc-{{ c.id }}">Descrição</label>
        <input id="desc-{{ c.id }}" name="description" value="{{ c.description or '' }}">
      </div>
      <div class="category-actions">
          <button class="btn small primary" type="submit">Salvar</button>
          <button class="btn small danger" type="submit" formaction="{{ url_for('delete_category', cat_id=c.id) }}" formmethod="post">Excluir</button>
      </div>
    </form>
  </li>
  {% endfor %}
</ul>
{% endblock %}